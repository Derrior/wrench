Developer DocumentationOther\+: \href{../user/getting-started.html}{\tt User} -\/ \href{../internal/getting-started.html}{\tt Internal}

The first step is to install the W\+R\+E\+N\+CH library, following the instructions on the \hyperlink{install}{installation page}.\hypertarget{getting-started_getting-started-example}{}\section{Running a First Example}\label{getting-started_getting-started-example}
Typing {\ttfamily make} in the top-\/level directory will compile the examples, and {\ttfamily make install} will put the examples binaries in the {\ttfamily /usr/local/bin} folder (for Mac\+OS and most Linux distributions).

W\+R\+E\+N\+CH provides a simple example in the {\ttfamily examples/simple-\/example} directory, which generates two executables\+: a cloud-\/based example {\ttfamily wrench-\/simple-\/example-\/cloud}, and a batch-\/system-\/based (e.\+g., S\+L\+U\+RM) example {\ttfamily wrench-\/simple-\/example-\/batch}. To run the examples, simply use one of the following commands\+:


\begin{DoxyCode}
# Runs the cloud-based implementation
wrench-simple-example-cloud \(\backslash\)
    <PATH-TO-WRENCH-FOLDER>/examples/simple-example/platform\_files/cloud\_hosts.xml \(\backslash\)
    <PATH-TO-WRENCH-FOLDER>/examples/simple-example/workflow\_files/genome.dax

# Runs the batch-based implementation
wrench-simple-example-batch \(\backslash\)
    <PATH-TO-WRENCH-FOLDER>/examples/simple-example/platform\_files/batch\_hosts.xml \(\backslash\)
    <PATH-TO-WRENCH-FOLDER>/examples/simple-example/workflow\_files/genome.dax
\end{DoxyCode}
\hypertarget{getting-started_getting-started-example-simple}{}\subsection{Understanding the Simple Example}\label{getting-started_getting-started-example-simple}
Both versions of the example (cloud of batch) require two command-\/line arguments\+: (1) a \href{http://simgrid.gforge.inria.fr/simgrid/3.19/doc/platform.html}{\tt Sim\+Grid virtual platform description file}; and (2) a W\+R\+E\+N\+CH workflow file.


\begin{DoxyItemize}
\item {\bfseries Sim\+Grid simulated platform description file\+:} A \href{http://simgrid.gforge.inria.fr}{\tt Sim\+Grid} simulation must be provided with the description of the platform on which an application execution is to be simulated. This is done via a platform description file, in X\+ML, that includes definitions of compute hosts, clusters of hosts, storage resources, network links, routes between hosts, etc. A detailed description on how to create a platform description file can be found \href{http://simgrid.gforge.inria.fr/simgrid/3.19/doc/platform.html}{\tt here}.
\item {\bfseries W\+R\+E\+N\+CH workflow file\+:} W\+R\+E\+N\+CH provides native parsers for \href{http://workflowarchive.org}{\tt D\+AX} (D\+AG in X\+ML) and \href{https://github.com/wrench-project/wrench/tree/master/doc/schemas}{\tt J\+S\+ON} workflow description file formats. Refer to their respective Web sites for detailed documentation.
\end{DoxyItemize}

The source file for the cloud-\/based simulator is at {\ttfamily examples/simple-\/example/\+Simulator\+Cloud.\+cpp} and at {\ttfamily examples/simple-\/example/\+Simulator\+Batch.\+cpp} for the batch-\/based example. These source files, which are heavily commented, and perform the following\+:


\begin{DoxyItemize}
\item The first step is to read and parse the workflow and the platform files, and to create a simulation object ({\ttfamily \hyperlink{classwrench_1_1_simulation}{wrench\+::\+Simulation}}).
\item A storage service ({\ttfamily \hyperlink{classwrench_1_1_simple_storage_service}{wrench\+::\+Simple\+Storage\+Service}}) is created and deployed on a host.
\item A cloud ({\ttfamily \hyperlink{classwrench_1_1_cloud_service}{wrench\+::\+Cloud\+Service}}) or a batch ({\ttfamily \hyperlink{classwrench_1_1_batch_service}{wrench\+::\+Batch\+Service}}) service is created and deployed on a host. Both services are seen by the simulation as compute services ({\ttfamily \hyperlink{classwrench_1_1_compute_service}{wrench\+::\+Compute\+Service}}) – jobs can then be submitted to these services.
\item A Workflow Management System ({\ttfamily \hyperlink{classwrench_1_1_w_m_s}{wrench\+::\+W\+MS}}) is instantiated (in this case the {\ttfamily Simple\+W\+MS}) with a reference to a workflow object ({\ttfamily \hyperlink{classwrench_1_1_workflow}{wrench\+::\+Workflow}}) and a scheduler ({\ttfamily wrench\+::\+Scheduler}). The scheduler implements the decision-\/making algorithms inside the W\+MS. These algorithms are modularized (so that the same W\+MS implementation can be iniated with various decision-\/making algorithms in different simulations). The source codes for the schedulers, which is of interest to \char`\"{}\+Developers\char`\"{} (i.\+e., those users who use the W\+R\+E\+N\+CH Developer A\+PI), is in directory {\ttfamily examples/scheduler}.
\item A file registry ({\ttfamily \hyperlink{classwrench_1_1_file_registry_service}{wrench\+::\+File\+Registry\+Service}}), a.\+k.\+a. a file replica catalog, which keeps track of files stored in different storage services, is deployed on a host.
\item Workflow input files are staged on the storage service
\item The simulation is launched, executes, and completes.
\item Timestamps can be retrieved to analyze the simulated execution.
\end{DoxyItemize}

This simple example can be used as a blueprint for starting a large W\+R\+E\+N\+C\+H-\/based simulation project. The next section provides further details about this process.\hypertarget{getting-started_getting-started-wrench-init}{}\section{W\+R\+E\+N\+C\+H Initialization Tool}\label{getting-started_getting-started-wrench-init}
The {\ttfamily wrench-\/init} tool is a project generator built with W\+R\+E\+N\+CH, which creates a simple project structure with example class files, as follows\+:


\begin{DoxyCode}
project-folder/
├── CMakeLists.txt
├── README.md
├── src/
│   ├── SimpleSimulator.cpp
│   ├── SimpleStandardJobScheduler.cpp
│   ├── SimpleStandardJobScheduler.h
│   ├── SimpleWMS.cpp
│   └── SimpleWMS.h 
├── test/
├── doc/
├── build/
└── data/
    ├── platform-files/
    └── workflow-files/
\end{DoxyCode}


The {\ttfamily Simple\+Simulator.\+cpp} source file contains the class representing the simulator (either cloud or batch). {\ttfamily Simple\+Standard\+Job\+Scheduler.\+h} and {\ttfamily Simple\+Standard\+Job\+Scheduler.\+cpp} contain a simple implementation for a {\ttfamily \hyperlink{classwrench_1_1_standard_job_scheduler}{wrench\+::\+Standard\+Job\+Scheduler}}; {\ttfamily Simple\+W\+M\+S.\+h} and {\ttfamily Simple\+W\+M\+S.\+cpp} denote the implementation of a simple workflow management system. Example platform and workflow files are also generated into the {\ttfamily data} folder. These files provide the minimum necessary implementation for a W\+R\+E\+N\+C\+H-\/enabled simulator.

The {\ttfamily wrench-\/init} tool only requires a single argument, the name of the folder where the project skeleton will be generated\+:


\begin{DoxyCode}
$ wrench-init <PROJECT\_FOLDER>
\end{DoxyCode}


Additional options supported by the tool can be found by using the {\ttfamily wrench-\/init -\/-\/help} command.\hypertarget{getting-started_getting-started-prep}{}\section{Preparing the Environment}\label{getting-started_getting-started-prep}
\hypertarget{getting-started_getting-started-prep-import}{}\subsection{Importing W\+R\+E\+N\+CH}\label{getting-started_getting-started-prep-import}
For ease of use, all W\+R\+E\+N\+CH abstractions are accessed via a single include statement\+:


\begin{DoxyCode}
\textcolor{preprocessor}{#include <wrench-dev.h>}
\end{DoxyCode}


Note that {\ttfamily \hyperlink{wrench-dev_8h_source}{wrench-\/dev.\+h}} is the only necessary include statement to use W\+R\+E\+N\+CH. It includes all interfaces and services provided in {\ttfamily \hyperlink{wrench_8h_source}{wrench.\+h}} (\href{../user/getting-started.html}{\tt user A\+PI}), as well as additional interfaces to develop your own algorithms and services.\hypertarget{getting-started_getting-started-prep-cmakelists}{}\subsection{Creating Your C\+Make\+Lists.\+txt File}\label{getting-started_getting-started-prep-cmakelists}
Below is an example of a {\ttfamily C\+Make\+Lists.\+txt} file that can be used as a starting template for developing a W\+R\+E\+N\+CH application compiled using cmake\+:


\begin{DoxyCode}
cmake\_minimum\_required(VERSION 3.2)
message(STATUS "Cmake version $\{CMAKE\_MAJOR\_VERSION\}.$\{CMAKE\_MINOR\_VERSION\}.$\{CMAKE\_PATCH\_VERSION\}")

project(YOUR\_PROJECT\_NAME)

add\_definitions("-Wall -Wno-unused-variable -Wno-unused-private-field")

set(CMAKE\_CXX\_STANDARD 11)

# include directories for dependencies and WRENCH libraries
include\_directories(src/ /usr/local/include /usr/local/include/wrench)

# source files
set(SOURCE\_FILES
        src/main.cpp
        )

# test files
set(TEST\_FILES
        )

# wrench library and dependencies
find\_library(WRENCH\_LIBRARY NAMES wrench)
find\_library(SIMGRID\_LIBRARY NAMES simgrid)
find\_library(PUGIXML\_LIBRARY NAMES pugixml)
find\_library(LEMON\_LIBRARY NAMES emon)
find\_library(GTEST\_LIBRARY NAMES gtest)

# generating the executable
add\_executable(my-executable $\{SOURCE\_FILES\})
target\_link\_libraries(my-executable 
                        $\{WRENCH\_LIBRARY\} 
                        $\{SIMGRID\_LIBRARY\} 
                        $\{PUGIXML\_LIBRARY\} 
                        $\{LEMON\_LIBRARY\}
                     )

install(TARGETS my-executable DESTINATION bin)

# generating unit tests
add\_executable(unit\_tests EXCLUDE\_FROM\_ALL 
                 $\{SOURCE\_FILES\} 
                 $\{TEST\_FILES\}
              )
target\_link\_libraries(unit\_tests 
                        $\{GTEST\_LIBRARY\} wrench -lpthread -lm
                     )
\end{DoxyCode}
 