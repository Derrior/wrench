\hypertarget{classwrench_1_1_bare_metal_compute_service}{}\section{wrench\+:\+:Bare\+Metal\+Compute\+Service Class Reference}
\label{classwrench_1_1_bare_metal_compute_service}\index{wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}}


A compute service that manages a set of multi-\/core compute hosts and provides access to their resources.  




{\ttfamily \#include $<$Bare\+Metal\+Compute\+Service.\+h$>$}

Inheritance diagram for wrench\+:\+:Bare\+Metal\+Compute\+Service\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{classwrench_1_1_bare_metal_compute_service}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classwrench_1_1_bare_metal_compute_service_ad1f0b74b15538742ec16da2f805df662}{Bare\+Metal\+Compute\+Service} (const std\+::string \&\hyperlink{classwrench_1_1_s4_u___daemon_a52bc0b9a6cd248310749dac086819f00}{hostname}, const std\+::map$<$ std\+::string, std\+::tuple$<$ unsigned long, double $>$$>$ compute\+\_\+resources, double scratch\+\_\+space\+\_\+size, std\+::map$<$ std\+::string, std\+::string $>$ \hyperlink{classwrench_1_1_service_a032143b1e2d7296dde9b4ca1e34845ce}{property\+\_\+list}=\{\}, std\+::map$<$ std\+::string, std\+::string $>$ \hyperlink{classwrench_1_1_service_a63865f20c92027ab626ab1347b0099d2}{messagepayload\+\_\+list}=\{\})
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\hyperlink{classwrench_1_1_bare_metal_compute_service_a67f03e4100d64ad6921dd65bfd1c8293}{Bare\+Metal\+Compute\+Service} (const std\+::string \&\hyperlink{classwrench_1_1_s4_u___daemon_a52bc0b9a6cd248310749dac086819f00}{hostname}, const std\+::set$<$ std\+::string $>$ compute\+\_\+hosts, double scratch\+\_\+space\+\_\+size, std\+::map$<$ std\+::string, std\+::string $>$ \hyperlink{classwrench_1_1_service_a032143b1e2d7296dde9b4ca1e34845ce}{property\+\_\+list}=\{\}, std\+::map$<$ std\+::string, std\+::string $>$ \hyperlink{classwrench_1_1_service_a63865f20c92027ab626ab1347b0099d2}{messagepayload\+\_\+list}=\{\})
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classwrench_1_1_bare_metal_compute_service_a2f5c37d9c535f10a7495896082f4381e}\label{classwrench_1_1_bare_metal_compute_service_a2f5c37d9c535f10a7495896082f4381e}} 
\hyperlink{classwrench_1_1_bare_metal_compute_service_a2f5c37d9c535f10a7495896082f4381e}{$\sim$\+Bare\+Metal\+Compute\+Service} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \hyperlink{classwrench_1_1_bare_metal_compute_service_a4cb81396122a15f7e4ac9005bd1729eb}{submit\+Pilot\+Job} (\hyperlink{classwrench_1_1_pilot_job}{Pilot\+Job} $\ast$job, std\+::map$<$ std\+::string, std\+::string $>$ \&service\+\_\+specific\+\_\+args) override
\begin{DoxyCompactList}\small\item\em Asynchronously submit a pilot job to the compute service. This will raise a \hyperlink{classwrench_1_1_workflow_execution_exception}{Workflow\+Execution\+Exception} as this service does not support pilot jobs. \end{DoxyCompactList}\item 
void \hyperlink{classwrench_1_1_bare_metal_compute_service_a7d2c3ad71439be57b66adbbe7861627f}{submit\+Standard\+Job} (\hyperlink{classwrench_1_1_standard_job}{Standard\+Job} $\ast$job, std\+::map$<$ std\+::string, std\+::string $>$ \&service\+\_\+specific\+\_\+args) override
\begin{DoxyCompactList}\small\item\em Submit a standard job to the compute service. \end{DoxyCompactList}\item 
void \hyperlink{classwrench_1_1_bare_metal_compute_service_ac57b38fba771cc65efc811abcf8907e2}{terminate\+Pilot\+Job} (\hyperlink{classwrench_1_1_pilot_job}{Pilot\+Job} $\ast$job) override
\begin{DoxyCompactList}\small\item\em Not implement implemented. Will throw. \end{DoxyCompactList}\item 
void \hyperlink{classwrench_1_1_bare_metal_compute_service_aebd4765ac17a44b96dbf7c3d415cfa7b}{terminate\+Standard\+Job} (\hyperlink{classwrench_1_1_standard_job}{Standard\+Job} $\ast$job) override
\begin{DoxyCompactList}\small\item\em Synchronously terminate a standard job previously submitted to the compute service. \end{DoxyCompactList}\item 
void \hyperlink{classwrench_1_1_bare_metal_compute_service_a199bba66e56383b91125026715bde9cf}{validate\+Properties} ()
\begin{DoxyCompactList}\small\item\em Method to make sure that property specs are valid. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
A compute service that manages a set of multi-\/core compute hosts and provides access to their resources. 

One can think of this as a simple service that allows the user to run tasks and to specify for each task on which host it should run and with how many cores. If no host is specified, the service will pick the least loaded host. If no number of cores is specified, the service will use as many cores as possible. The service will make sure that the R\+AM capacity of a host is not exceeded by possibly delaying task executions until enough R\+AM is available. 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classwrench_1_1_bare_metal_compute_service_ad1f0b74b15538742ec16da2f805df662}\label{classwrench_1_1_bare_metal_compute_service_ad1f0b74b15538742ec16da2f805df662}} 
\index{wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}!Bare\+Metal\+Compute\+Service@{Bare\+Metal\+Compute\+Service}}
\index{Bare\+Metal\+Compute\+Service@{Bare\+Metal\+Compute\+Service}!wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}}
\subsubsection{\texorpdfstring{Bare\+Metal\+Compute\+Service()}{BareMetalComputeService()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily wrench\+::\+Bare\+Metal\+Compute\+Service\+::\+Bare\+Metal\+Compute\+Service (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{hostname,  }\item[{const std\+::map$<$ std\+::string, std\+::tuple$<$ unsigned long, double $>$$>$}]{compute\+\_\+resources,  }\item[{double}]{scratch\+\_\+space\+\_\+size,  }\item[{std\+::map$<$ std\+::string, std\+::string $>$}]{property\+\_\+list = {\ttfamily \{\}},  }\item[{std\+::map$<$ std\+::string, std\+::string $>$}]{messagepayload\+\_\+list = {\ttfamily \{\}} }\end{DoxyParamCaption})}



Constructor. 


\begin{DoxyParams}{Parameters}
{\em hostname} & the name of the host on which the service should be started \\
\hline
{\em compute\+\_\+resources} & a map of $<$num\+\_\+cores, memory$>$ tuples, indexed by hostname, which represents the compute resources available to this service.
\begin{DoxyItemize}
\item use num\+\_\+cores = \hyperlink{classwrench_1_1_compute_service_a1160f521623440ad4e0e0823e08a7d22}{Compute\+Service\+::\+A\+L\+L\+\_\+\+C\+O\+R\+ES} to use all cores available on the host
\item use memory = \hyperlink{classwrench_1_1_compute_service_abc4fe0bad59f544b4b34d0e7d4012d44}{Compute\+Service\+::\+A\+L\+L\+\_\+\+R\+AM} to use all R\+AM available on the host 
\end{DoxyItemize}\\
\hline
{\em scratch\+\_\+space\+\_\+size} & size (in bytes) of the compute service\textquotesingle{}s scratch storage paste \\
\hline
{\em property\+\_\+list} & a property list (\{\} means \char`\"{}use all defaults\char`\"{}) \\
\hline
{\em messagepayload\+\_\+list} & a message payload list (\{\} means \char`\"{}use all defaults\char`\"{}) \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classwrench_1_1_bare_metal_compute_service_a67f03e4100d64ad6921dd65bfd1c8293}\label{classwrench_1_1_bare_metal_compute_service_a67f03e4100d64ad6921dd65bfd1c8293}} 
\index{wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}!Bare\+Metal\+Compute\+Service@{Bare\+Metal\+Compute\+Service}}
\index{Bare\+Metal\+Compute\+Service@{Bare\+Metal\+Compute\+Service}!wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}}
\subsubsection{\texorpdfstring{Bare\+Metal\+Compute\+Service()}{BareMetalComputeService()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily wrench\+::\+Bare\+Metal\+Compute\+Service\+::\+Bare\+Metal\+Compute\+Service (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{hostname,  }\item[{const std\+::set$<$ std\+::string $>$}]{compute\+\_\+hosts,  }\item[{double}]{scratch\+\_\+space\+\_\+size,  }\item[{std\+::map$<$ std\+::string, std\+::string $>$}]{property\+\_\+list = {\ttfamily \{\}},  }\item[{std\+::map$<$ std\+::string, std\+::string $>$}]{messagepayload\+\_\+list = {\ttfamily \{\}} }\end{DoxyParamCaption})}



Constructor. 


\begin{DoxyParams}{Parameters}
{\em hostname} & the name of the host on which the service should be started \\
\hline
{\em compute\+\_\+hosts,\+:} & the names of the hosts available as compute resources (the service will use all the cores and all the R\+AM of each host) \\
\hline
{\em scratch\+\_\+space\+\_\+size} & size (in bytes) of the compute service\textquotesingle{}s scratch storage paste \\
\hline
{\em property\+\_\+list} & a property list (\{\} means \char`\"{}use all defaults\char`\"{}) \\
\hline
{\em messagepayload\+\_\+list} & a message payload list (\{\} means \char`\"{}use all defaults\char`\"{}) \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classwrench_1_1_bare_metal_compute_service_a4cb81396122a15f7e4ac9005bd1729eb}\label{classwrench_1_1_bare_metal_compute_service_a4cb81396122a15f7e4ac9005bd1729eb}} 
\index{wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}!submit\+Pilot\+Job@{submit\+Pilot\+Job}}
\index{submit\+Pilot\+Job@{submit\+Pilot\+Job}!wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}}
\subsubsection{\texorpdfstring{submit\+Pilot\+Job()}{submitPilotJob()}}
{\footnotesize\ttfamily void wrench\+::\+Bare\+Metal\+Compute\+Service\+::submit\+Pilot\+Job (\begin{DoxyParamCaption}\item[{\hyperlink{classwrench_1_1_pilot_job}{Pilot\+Job} $\ast$}]{job,  }\item[{std\+::map$<$ std\+::string, std\+::string $>$ \&}]{service\+\_\+specific\+\_\+args }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Asynchronously submit a pilot job to the compute service. This will raise a \hyperlink{classwrench_1_1_workflow_execution_exception}{Workflow\+Execution\+Exception} as this service does not support pilot jobs. 


\begin{DoxyParams}{Parameters}
{\em job} & a pilot job \\
\hline
{\em service\+\_\+specific\+\_\+args} & service specific arguments (only \{\} is supported)\\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
{\em \hyperlink{classwrench_1_1_workflow_execution_exception}{Workflow\+Execution\+Exception}} & \\
\hline
{\em std\+::runtime\+\_\+error} & \\
\hline
\end{DoxyExceptions}


Implements \hyperlink{classwrench_1_1_compute_service}{wrench\+::\+Compute\+Service}.

\mbox{\Hypertarget{classwrench_1_1_bare_metal_compute_service_a7d2c3ad71439be57b66adbbe7861627f}\label{classwrench_1_1_bare_metal_compute_service_a7d2c3ad71439be57b66adbbe7861627f}} 
\index{wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}!submit\+Standard\+Job@{submit\+Standard\+Job}}
\index{submit\+Standard\+Job@{submit\+Standard\+Job}!wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}}
\subsubsection{\texorpdfstring{submit\+Standard\+Job()}{submitStandardJob()}}
{\footnotesize\ttfamily void wrench\+::\+Bare\+Metal\+Compute\+Service\+::submit\+Standard\+Job (\begin{DoxyParamCaption}\item[{\hyperlink{classwrench_1_1_standard_job}{Standard\+Job} $\ast$}]{job,  }\item[{std\+::map$<$ std\+::string, std\+::string $>$ \&}]{service\+\_\+specific\+\_\+args }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Submit a standard job to the compute service. 


\begin{DoxyParams}{Parameters}
{\em job} & a standard job \\
\hline
{\em service\+\_\+specific\+\_\+args} & optional service specific arguments\\
\hline
\end{DoxyParams}
These arguments are provided as a map of strings, indexed by task I\+Ds. These strings are formatted as \char`\"{}\mbox{[}hostname\+:\mbox{]}\mbox{[}num\+\_\+cores\mbox{]}\char`\"{} (e.\+g., \char`\"{}somehost\+:12\char`\"{}, \char`\"{}somehost\char`\"{},\char`\"{}6\char`\"{}, \char`\"{}\char`\"{}).


\begin{DoxyItemize}
\item If a value is not provided for a task, then the service will choose a host and use as many cores as possible on that host.
\item If a \char`\"{}\char`\"{} value is provided for a task, then the service will choose a host and use as many cores as possible on that host.
\item If a \char`\"{}hostname\char`\"{} value is provided for a task, then the service will run the task on that host, using as many of its cores as possible
\item If a \char`\"{}num\+\_\+cores\char`\"{} value is provided for a task, then the service will run that task with this many cores, but will choose the host on which to run it.
\item If a \char`\"{}hostname\+:num\+\_\+cores\char`\"{} value is provided for a task, then the service will run that task with this many cores on that host.
\end{DoxyItemize}


\begin{DoxyExceptions}{Exceptions}
{\em \hyperlink{classwrench_1_1_workflow_execution_exception}{Workflow\+Execution\+Exception}} & \\
\hline
{\em std\+::invalid\+\_\+argument} & \\
\hline
{\em std\+::runtime\+\_\+error} & \\
\hline
\end{DoxyExceptions}


Implements \hyperlink{classwrench_1_1_compute_service}{wrench\+::\+Compute\+Service}.

\mbox{\Hypertarget{classwrench_1_1_bare_metal_compute_service_ac57b38fba771cc65efc811abcf8907e2}\label{classwrench_1_1_bare_metal_compute_service_ac57b38fba771cc65efc811abcf8907e2}} 
\index{wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}!terminate\+Pilot\+Job@{terminate\+Pilot\+Job}}
\index{terminate\+Pilot\+Job@{terminate\+Pilot\+Job}!wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}}
\subsubsection{\texorpdfstring{terminate\+Pilot\+Job()}{terminatePilotJob()}}
{\footnotesize\ttfamily void wrench\+::\+Bare\+Metal\+Compute\+Service\+::terminate\+Pilot\+Job (\begin{DoxyParamCaption}\item[{\hyperlink{classwrench_1_1_pilot_job}{Pilot\+Job} $\ast$}]{job }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Not implement implemented. Will throw. 


\begin{DoxyParams}{Parameters}
{\em job} & a pilot job to (supposedly) terminate\\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
{\em std\+::runtime\+\_\+error} & \\
\hline
\end{DoxyExceptions}


Implements \hyperlink{classwrench_1_1_compute_service}{wrench\+::\+Compute\+Service}.

\mbox{\Hypertarget{classwrench_1_1_bare_metal_compute_service_aebd4765ac17a44b96dbf7c3d415cfa7b}\label{classwrench_1_1_bare_metal_compute_service_aebd4765ac17a44b96dbf7c3d415cfa7b}} 
\index{wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}!terminate\+Standard\+Job@{terminate\+Standard\+Job}}
\index{terminate\+Standard\+Job@{terminate\+Standard\+Job}!wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}}
\subsubsection{\texorpdfstring{terminate\+Standard\+Job()}{terminateStandardJob()}}
{\footnotesize\ttfamily void wrench\+::\+Bare\+Metal\+Compute\+Service\+::terminate\+Standard\+Job (\begin{DoxyParamCaption}\item[{\hyperlink{classwrench_1_1_standard_job}{Standard\+Job} $\ast$}]{job }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Synchronously terminate a standard job previously submitted to the compute service. 


\begin{DoxyParams}{Parameters}
{\em job} & a standard job\\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
{\em \hyperlink{classwrench_1_1_workflow_execution_exception}{Workflow\+Execution\+Exception}} & \\
\hline
{\em std\+::runtime\+\_\+error} & \\
\hline
\end{DoxyExceptions}


Implements \hyperlink{classwrench_1_1_compute_service}{wrench\+::\+Compute\+Service}.

\mbox{\Hypertarget{classwrench_1_1_bare_metal_compute_service_a199bba66e56383b91125026715bde9cf}\label{classwrench_1_1_bare_metal_compute_service_a199bba66e56383b91125026715bde9cf}} 
\index{wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}!validate\+Properties@{validate\+Properties}}
\index{validate\+Properties@{validate\+Properties}!wrench\+::\+Bare\+Metal\+Compute\+Service@{wrench\+::\+Bare\+Metal\+Compute\+Service}}
\subsubsection{\texorpdfstring{validate\+Properties()}{validateProperties()}}
{\footnotesize\ttfamily void wrench\+::\+Bare\+Metal\+Compute\+Service\+::validate\+Properties (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Method to make sure that property specs are valid. 


\begin{DoxyExceptions}{Exceptions}
{\em std\+::invalid\+\_\+argument} & \\
\hline
\end{DoxyExceptions}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/rafsilva/\+Documents/isi/workspace/wrench/wrench/include/wrench/services/compute/bare\+\_\+metal/Bare\+Metal\+Compute\+Service.\+h\item 
/\+Users/rafsilva/\+Documents/isi/workspace/wrench/wrench/src/wrench/services/compute/bare\+\_\+metal/Bare\+Metal\+Compute\+Service.\+cpp\end{DoxyCompactItemize}
